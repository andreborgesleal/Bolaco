@model DWM.Models.RegisterViewModel
@using DWM.Models.Repositories
@{
    Layout = "~/Views/Shared/_LayoutLogin.cshtml";
    ViewBag.Title = "Bolaaaaço da Norte Refrigeração";
    IEnumerable<ParametroViewModel> Parametros = ViewBag.Parametros;
    IEnumerable<TicketViewModel> Ganhadores = ViewBag.Ganhadores;

    string _active1 = "";
    string _active2 = "";
    string _active3 = "";
    string _active4 = "";
    string _active5 = "";
                                                    
    if (Parametros.Where(info => info.paramId == 18).Select(info => info.valor).FirstOrDefault() != null && Parametros.Where(info => info.paramId == 18).Select(info => info.valor).FirstOrDefault() != "")
    {
        _active5 = "active";
    }
    else if (Parametros.Where(info => info.paramId == 14).Select(info => info.valor).FirstOrDefault() != null && Parametros.Where(info => info.paramId == 14).Select(info => info.valor).FirstOrDefault() != "")
    {
        _active3 = "active";
    }
    else if (Parametros.Where(info => info.paramId == 12).Select(info => info.valor).FirstOrDefault() != null && Parametros.Where(info => info.paramId == 12).Select(info => info.valor).FirstOrDefault() != "")
    {
        _active2 = "active";
    }
    else
    {
        _active1 = "active";
    }
}

@*<div class="jumbotron">
    <h1>ASP.NET</h1>
    <p class="lead">ASP.NET is a free web framework for building great Web sites and Web applications using HTML, CSS and JavaScript.</p>
    <p><a href="http://asp.net" class="btn btn-primary btn-large">Learn more &raquo;</a></p>
</div>*@

<div class="row carousel-inner" style="margin-top: 10px">
    <div class="col-md-6 item active">
        <div class="row carousel-inner">
            <div class="col-md-12 item active">
                <img src="~/Content/images/Bolaaaaco_identidade_visual2.jpg" />
            </div>
        </div>
        <div class="row carousel-inner" style="margin-top: 15px; margin-bottom: -8px">
            <div class="col-md-12 item active">
                <div class="jumbotron" style="color: #faf7f7; padding: 15px">
                    <div style="line-height: 23px">
                        <span style="font-family: Verdana">Cadastre-se e dê seus palpites nos jogos do mundial da Copa 2014! Mostre o quanto você é bom em dar palpites. Não esqueça, quanto mais você comprar mais chances tem de ganhar prêmios!</span>
                    </div>
                </div>
            </div>
        </div>
        @*-------- Regulamento -------*@
        <div class="row clearfix carousel-inner" style="margin-top: -20px">
            <div class="col-md-12 item active">
                <div class="alert alert-dismissable alert-warning" style="padding: 12px">
                    <div class="row">
                        <div class="col-md-12" style="text-align: center">
                            <a class="label" href="#modal-container-964987b" data-toggle="modal"><span style="font-size: large; color: #3c3c3c">Entenda melhor o regulamento</span></a>
                        </div>
                    </div>
                    @***********Formulário Modal REGULAMENTO **************@
                    <div class="modal fade" id="modal-container-964987b" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog" style="width: 80%">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                                    <h2 class="modal-title" id="myModalLabel">
                                        Regulamento da promoção
                                    </h2>
                                </div>
                                <div class="modal-body" style="overflow-y: auto; height: 450px">
                                    <div class="carousel slide">
                                        <div class="carousel-inner">
                                            <div class="item active">
                                                @Html.Partial("_Regras")
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        @*-------- Prêmios -------*@
        <div class="row carousel-inner" style="margin-top: -10px">
            <div class="col-md-12 item active">
                <div class="jumbotron" style="color: #faf7f7; padding: 13px">
                    <div style="line-height: 15px; text-align: center">
                        <a class="label" href="#modal-container-964987K" data-toggle="modal"><span style="font-size: large; color: #faf7f7">Confira os prêmios</span></a>
                        @***********Formulário Modal PRÊMIOS **************@
                        <div class="modal fade" id="modal-container-964987K" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog" style="width: 55%">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                                        <h2 class="modal-title" id="myModalLabel">
                                            Prêmios
                                        </h2>
                                    </div>
                                    <div class="modal-body" style="overflow-y: auto; height: 450px">
                                        <div class="carousel slide">
                                            <div class="carousel-inner">
                                                <div class="item active">
                                                    <img src="..\Content\images\produtos900.png">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        @*-------- Estatísticas -------*@
        <div class="row carousel-inner" style="margin-top: -15px">
            <div class="col-md-12 item active">
                <div class="alert alert-dismissable alert-warning" style="text-align: center; padding: 8px">
                    <a class="label" href="#" data-toggle="modal" onclick="ShowEstatistica();"><span style="font-size: large; color: #3c3c3c">Estatística dos palpites</span></a>
                </div>
            </div>
        </div>

        @*-------- Tablaaaaço -------*@
        <div class="row carousel-inner" style="margin-top: -10px">
            <div class="col-md-12 item active">
                <div class="jumbotron" style="color: #faf7f7; padding: 13px">
                    <div style="line-height: 15px; text-align: center">
                        <a class="label" href="http://tabelaaaaco.herokuapp.com" target="_blank"><span style="font-size: large; color: #faf7f7">Tabelaaaaço</span></a>
                    </div>
                </div>
            </div>
        </div>

        @*-------- Ganhadores -------*@
        <div class="row carousel-inner" style="margin-top: -15px">
            <div class="col-md-12 item active">
                <div class="alert alert-dismissable alert-warning" style="text-align: center; padding: 8px">
                    <a class="label" href="#modal-container-964987j" data-toggle="modal" onclick="ShowVencedores();"><span style="font-size: large; color: #3c3c3c">Ganhadores</span></a>
                    @***********Formulário Modal VENCEDORES **************@
                    <div class="modal fade" id="modal-container-964987j" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog" style="width: 55%">
                            <div class="modal-content">
                                <div class="modal-header" style="height: 80px">
                                    <nav class="navbar navbar-default" role="navigation">
                                        <div class="container-fluid">
                                            <!-- Brand and toggle get grouped for better mobile display -->
                                            <div class="navbar-header">
                                                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                                                    <span class="sr-only">Toggle navigation</span>
                                                    <span class="icon-bar"></span>
                                                    <span class="icon-bar"></span>
                                                    <span class="icon-bar"></span>
                                                    <span class="icon-bar"></span>
                                                </button>
                                                @*<a class="navbar-brand" href="#" style="font-family: Verdana">Ganhadores do Bolaaaaço da Norte Refrigeração</a>*@
                                            </div>
                                            <!-- Collect the nav links, forms, and other content for toggling -->
                                            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                                                <ul class="nav navbar-nav">
                                                    <li id="_Aba0" class="@_active1" onclick="MoveNext('0')"><a href="#">1º Prêmio (Brasil x Croácia)</a></li>
                                                    @if (Parametros.Where(info => info.paramId == 12).Select(info => info.valor).FirstOrDefault() != null && Parametros.Where(info => info.paramId == 12).Select(info => info.valor).FirstOrDefault() != "")
                                                    {
                                                        <li id="_Aba1" class="@_active2"><a href="#" onclick="MoveNext('1')">1º Prêmio (Brasil x México)</a></li>
                                                    }
                                                    @if (Parametros.Where(info => info.paramId == 14).Select(info => info.valor).FirstOrDefault() != null && Parametros.Where(info => info.paramId == 14).Select(info => info.valor).FirstOrDefault() != "")
                                                    {
                                                        <li id="_Aba2" class="@_active3"><a href="#" onclick="MoveNext('2')">1º Prêmio (Brasil x Camarões)</a></li>
                                                        <li id="_Aba3" class=""><a href="#" onclick="MoveNext('3')">2º Prêmio</a></li>
                                                    }                                                                                                            
                                                    @if (Parametros.Where(info => info.paramId == 18).Select(info => info.valor).FirstOrDefault() != null && Parametros.Where(info => info.paramId == 18).Select(info => info.valor).FirstOrDefault() != "")
                                                    {
                                                        <li id="_Aba4" class="@_active5"><a href="#" onclick="MoveNext('4')">3º Prêmio (Final)</a></li>
                                                    }
                                                </ul>
                                            </div><!-- /.navbar-collapse -->
                                        </div><!-- /.container-fluid -->
                                    </nav>                                
                                </div>
                                <div class="modal-body" style="overflow-y: auto; height: 450px">
                                    <div class="row">
                                        <div class="col-md-12" style="overflow-x: auto; height: 394px">
                                            <div class="bs-example">
                                                <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                                                    <ol class="carousel-indicators">
                                                        <li data-target="#carousel-example-generic" data-slide-to="0" class="@_active1"></li>
                                                        <li data-target="#carousel-example-generic" data-slide-to="1" class="@_active2"></li>
                                                        <li data-target="#carousel-example-generic" data-slide-to="2" class="@_active3"></li>
                                                        <li data-target="#carousel-example-generic" data-slide-to="3" class="@_active4"></li>
                                                        <li data-target="#carousel-example-generic" data-slide-to="4" class="@_active5"></li>
                                                    </ol>
                                                    <div class="carousel-inner">
                                                        <div class="item @_active1">
                                                            <h4 style="font-family: Verdana">Ganhadores de Brasil @Parametros.Where(info => info.paramId == 10).FirstOrDefault().valor x @Parametros.Where(info => info.paramId == 11).FirstOrDefault().valor Croácia</h4>
                                                            <table class="table table-hover table-bordered table-condensed" style="cursor: pointer; padding-right: 7px;">
                                                                <caption></caption>
                                                                <thead style="background-color: #FAEC37">
                                                                    <tr>
                                                                        <th style="text-align: center">Nome</th>
                                                                        <th style="text-align: center">Nº da Sorte</th>
                                                                        <th style="text-align: center">Data do Palpite</th>
                                                                    </tr>
                                                                </thead>
                                                                @{

                                                                }
                                                                @foreach (DWM.Models.Repositories.TicketViewModel t in Ganhadores.Where(info => info.score1Brasil == -2))
                                                                {
                                                                    <tr>
                                                                        <td style="text-align: left;"><small>@t.clienteViewModel.nome</small></td>
                                                                        <td style="text-align: center"><small>@t.ticketId.ToUpper()</small></td>
                                                                        <td style="text-align: center"><small>@(t.dt_inscricao.ToString("dd/MM/yyyy HH:mm"))h.</small></td>
                                                                    </tr>
                                                                }
                                                            </table>
                                                        </div>
                                                        <div class="item @_active2">
                                                            <h4 style="font-family: Verdana">Ganhadores de Brasil @Parametros.Where(info => info.paramId == 12).FirstOrDefault().valor x @Parametros.Where(info => info.paramId == 13).FirstOrDefault().valor México</h4>
                                                            <table class="table table-hover table-bordered table-condensed" style="cursor: pointer; padding-right: 7px;">
                                                                <caption></caption>
                                                                <thead style="background-color: #406546; color: #fff">
                                                                    <tr>
                                                                        <th style="text-align: center">Nome</th>
                                                                        <th style="text-align: center">Nº da Sorte</th>
                                                                        <th style="text-align: center">Data do Palpite</th>
                                                                    </tr>
                                                                </thead>
                                                                @{

                                                                }
                                                                @foreach (DWM.Models.Repositories.TicketViewModel t in Ganhadores.Where(info => info.score1Brasil == -3))
                                                                {
                                                                    <tr>
                                                                        <td style="text-align: left;"><small>@t.clienteViewModel.nome</small></td>
                                                                        <td style="text-align: center"><small>@t.ticketId.ToUpper()</small></td>
                                                                        <td style="text-align: center"><small>@(t.dt_inscricao.ToString("dd/MM/yyyy HH:mm"))h.</small></td>
                                                                    </tr>
                                                                }
                                                            </table>
                                                        </div>
                                                        <div class="item @_active3">
                                                            <h4 style="font-family: Verdana">Ganhadores de Brasil @Parametros.Where(info => info.paramId == 14).FirstOrDefault().valor x @Parametros.Where(info => info.paramId == 15).FirstOrDefault().valor Camarões</h4>
                                                            <table class="table table-hover table-bordered table-condensed" style="cursor: pointer; padding-right: 7px;">
                                                                <caption></caption>
                                                                <thead style="background-color: #FAEC37">
                                                                    <tr>
                                                                        <th style="text-align: center">Nome</th>
                                                                        <th style="text-align: center">Nº da Sorte</th>
                                                                        <th style="text-align: center">Data do Palpite</th>
                                                                    </tr>
                                                                </thead>
                                                                @{

                                                                }
                                                                @foreach (DWM.Models.Repositories.TicketViewModel t in Ganhadores.Where(info => info.score1Brasil == -4))
                                                                {
                                                                    <tr>
                                                                        <td style="text-align: left;"><small>@t.clienteViewModel.nome</small></td>
                                                                        <td style="text-align: center"><small>@t.ticketId.ToUpper()</small></td>
                                                                        <td style="text-align: center"><small>@(t.dt_inscricao.ToString("dd/MM/yyyy HH:mm"))h.</small></td>
                                                                    </tr>
                                                                }
                                                            </table>
                                                        </div>
                                                        <div class="item @_active4">
                                                            <h4 style="font-family: Verdana">Clientes que acertaram 3 jogos do Brasil</h4>
                                                            <table class="table table-hover table-bordered table-condensed" style="cursor: pointer; padding-right: 7px;">
                                                                <tr>
                                                                    <td style="text-align: center;" colspan="3">NÃO HOUVE ACERTADOR</td>
                                                                </tr>
                                                            </table>
                                                            <h4 style="font-family: Verdana">Clientes que acertaram 2 jogos do Brasil</h4>
                                                            <table class="table table-hover table-bordered table-condensed" style="cursor: pointer; padding-right: 7px;">
                                                                <caption></caption>
                                                                <thead style="background-color: #406546; color: #fff">
                                                                    <tr>
                                                                        <th style="text-align: center">Nome</th>
                                                                        <th style="text-align: center">Nº da Sorte</th>
                                                                        <th style="text-align: center">Data do Palpite</th>
                                                                    </tr>
                                                                </thead>
                                                                @foreach (DWM.Models.Repositories.TicketViewModel t in Ganhadores.Where(info => info.score1Brasil == -5))
                                                                {
                                                                    <tr>
                                                                        <td style="text-align: left;"><small>@t.clienteViewModel.nome</small></td>
                                                                        <td style="text-align: center"><small>@t.ticketId.ToUpper()</small></td>
                                                                        <td style="text-align: center"><small>@(t.dt_inscricao.ToString("dd/MM/yyyy HH:mm"))h.</small></td>
                                                                    </tr>
                                                                }
                                                            </table>                                      
                                                            <h4 style="font-family: Verdana">Ganhador do 2º Prêmio</h4>
                                                            <table class="table table-hover table-bordered table-condensed" style="cursor: pointer; padding-right: 7px;">
                                                                <caption></caption>
                                                                <thead style="background-color: #406546; color: #fff">
                                                                    <tr>
                                                                        <th style="text-align: center">Nome</th>
                                                                        <th style="text-align: center">Nº da Sorte</th>
                                                                        <th style="text-align: center">Data do Palpite</th>
                                                                    </tr>
                                                                </thead>
                                                                @{
                                                                    DWM.Models.Repositories.TicketViewModel ganhador2premio = Ganhadores.Where(info => info.score1Brasil == -5).FirstOrDefault();
                                                                }
                                                                <tr>
                                                                    <td style="text-align: left;"><small>@ganhador2premio.clienteViewModel.nome</small></td>
                                                                    <td style="text-align: center"><small>@ganhador2premio.ticketId.ToUpper()</small></td>
                                                                    <td style="text-align: center"><small>@(ganhador2premio.dt_inscricao.ToString("dd/MM/yyyy HH:mm"))h.</small></td>
                                                                </tr>
                                                            </table>
                                                            <small>Observação: @ganhador2premio.clienteViewModel.nome foi o ganhador pelo critério de desempate "DATA DO PALPITE MAIS ANTIGA"</small>
                                                            <p>&nbsp;</p>
                                                            <p>&nbsp;</p>
                                                        </div>
                                                        <div class="item @_active5">
                                                            <h4 style="font-family: Verdana">Ganhador que acertou a final da copa</h4>
                                                            <table class="table table-hover table-bordered table-condensed" style="cursor: pointer; padding-right: 7px;">
                                                                <caption></caption>
                                                                <thead style="background-color: #FAEC37">
                                                                    <tr>
                                                                        <th style="text-align: center">Nome</th>
                                                                        <th style="text-align: center">Nº da Sorte</th>
                                                                        <th style="text-align: center">Data do Palpite</th>
                                                                    </tr>
                                                                </thead>
                                                                @{

                                                                }
                                                                @foreach (DWM.Models.Repositories.TicketViewModel t in Ganhadores.Where(info => info.score1Brasil == -6))
                                                                {
                                                                    <tr>
                                                                        <td style="text-align: left;"><small>@t.clienteViewModel.nome</small></td>
                                                                        <td style="text-align: center"><small>@t.ticketId.ToUpper()</small></td>
                                                                        <td style="text-align: center"><small>@(t.dt_inscricao.ToString("dd/MM/yyyy HH:mm"))h.</small></td>
                                                                    </tr>
                                                                }
                                                            </table>
                                                        </div>
                                                    </div>
                                                    @*<a class="left carousel-control" href="#carousel-example-generic" data-slide="prev">
                                                        <span class="glyphicon glyphicon-chevron-left"></span>
                                                    </a>
                                                    <a class="right carousel-control" href="#carousel-example-generic" data-slide="next">
                                                        <span class="glyphicon glyphicon-chevron-right"></span>
                                                    </a>*@
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer" style="padding: 10px">
                                    <div class="row">
                                        <div class="col-md-9"><h3 style="margin-top: 3px">Ganhadores do Bolaaaaço da Norte Refrigeração</h3></div>
                                        <div class="col-md-3"><button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-6 item active">
        @Html.Partial("_Register", Model)
    </div>
</div>
<div id="div-est"></div>


<script type="text/javascript">

    $('#carousel-example-generic').carousel({
        interval: onpause
    })

    function MoveNext(value) {
        $('#carousel-example-generic').carousel(eval(value));

        $('#_Aba0').attr("class", "");
        $('#_Aba1').attr("class", "");
        $('#_Aba2').attr("class", "");
        $('#_Aba3').attr("class", "");
        $('#_Aba4').attr("class", "");

        $('#_Aba' + value).attr("class", "active");
    }

    function ShowEstatistica() {
        var link = '../Home/_Estatistica';
        link = encodeURI(link + '?noCache=' + new Date());

        $('#carregando').css("visibility", "visible");
        $('#carregando').css("width", "100%");
        $('#carregando').css("height", "100%");
        $('#carregando').css("position", "absolute");
        $('#carregando').css("background-color", "black");
        $('#carregando').css("filter", "alpha(opacity=60)");
        $('#carregando').css("opacity", "0.6");
        $('#carregando').css("left", "0%");
        $('#carregando').css("top", "0%");

        $('#div-est').load(link);

        $(document).ajaxSuccess(function (event, xhr, settings) {
            $('#carregando').css("visibility", "hidden");
            $('#carregando').css("height", "0px");
            $('#carregando').css("margin-top", "0%");
            $('#carregando').css("margin-left", "0%");
        }).error(function () {
            $('#carregando').css("visibility", "hidden");
            $('#carregando').css("height", "0px");
            $('#carregando').css("margin-top", "0%");
            $('#carregando').css("margin-left", "0%");
        })
    }

    function ShowVencedores() {
        //var link = '../Home/_Vencedores';
        //link = encodeURI(link + '?noCache=' + new Date());

        //$.ajax({
        //    type: "GET",
        //    url: link,
        //    data: {
        //        hoje: new Date()
        //    },
        //    success: function (data) {
        //        $('#div-est').html(data);
        //        $('#msgs').html("");
        //    }
        //});
    }
</script>